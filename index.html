<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>controle de transito</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Katibeh&display=swap" rel="stylesheet">
</head>

<body>


    <nav>
        <h2>Controle de Transito</h2>

    </nav>
    <main>

        <div class="semaforo">
            <div class="quadrado">

            </div>

    </main>

</body>
<script>
    function updateStatus(){
    fetch("https://niloweb.com.br/transit-room/api/reg_endpoint.php")
        .then(resposta => resposta.json())
        .then(dados1 => {
            if (dados1[0].res == "B") {
                document.querySelector('div').className = 'quadrado bloqueado';
                playSound();

            } else if (dados1[0].res == "L") {
                document.querySelector('div').className = 'quadrado liberado';
                playSound();

            } else {
                document.querySelector('div').className = 'quadrado aguarde';

                playSound();


            }
        });
    }

  
	updateStatus();
        setInterval(updateStatus, 4000);

        function playSound() {
            const audio = new Audio('som');
            audio.onended = function() {
            };
            audio.play();
}


</script>

</html>